# NODEJS

## Conhecendo o NPX - Executor de Pacotes do NPM
##### Thiago Marinho 

üöÄ   Vamos falar sobre o NPX, descobrir quem criou, quem est√° mantendo, o que podemos fazer com essa ferramenta, qual a vantagem de utilizar e algumas dicas. üëä

üë©‚Äçüíª Quem criou e quem est√° por tr√°s dessa ferramenta?
O NPX foi desenvolvido pela Kat Marc√°n, atualmente √© mantido pelo NPM, que foi comprado recentemente pelo Github. O NPX √© um bin√°rio que est√° presente no NPM desde a vers√£o 5.2.

ü§∑‚Äç‚ôÇÔ∏è O que √©?

NPX √© um package runner do NPM. Ele executa as bibliotecas que podem ser baixadas do site npmjs. Essas bibliotecas ficam em um banco de dados chamado NPM Registry, que tamb√©m podem ser baixadas via CLI com npm ou yarn e com npx como veremos a seguir.

NPM √© um gerenciador de pacotes que j√° estamos acostumados a usar junto com o Node.js. Com NPM instalamos e desinstalamos as bibliotecas de um projeto ou da m√°quina. Com Yarn √© a mesma coisa na pr√°tica.

Se o NPM √© um gerenciador (manager) de pacotes, o NPX √© um executor, por isso o X no final da sigla.

drwx = Directory/Read/Write/eXecute.

‚èÆÔ∏è Antes do NPX

Antes precis√°vamos instalar os pacotes do npm na m√°quina de maneira global.


npm install cowsay -g 

O bin√°rio do pacote instalado fica salvo no path e dispon√≠vel no terminal para executar de qualquer local.

Por√©m, isso gerava problemas na seguinte situa√ß√£o: se mandasse o projeto para outro dev, ele n√£o teria acesso as bibliotecas de maneira local, o mesmo deveria instalar a biblioteca global na m√°quina.


Instalando o cowsay globalmente: npm install cowsay -g

Projetos Locais

Surgiu a necessidade do package.json que tem as devDependencies e dependencies. Que cont√©m todo o descritivo das bibliotecas necess√°rias no projeto.

Com isso podemos instalar as bibliotecas de maneira local por projeto, e ent√£o cada projeto passa a ter uma node_modules de acordo com a vers√£o da biblioteca.


Instalando o cowsay no projeto local.

Criando um projeto com node e instalando a lib cowsay:

mkdir myNodeProject && cd myNodeProject && npm init -y && npm install cowsay

Executando a lib cowsay diretamente na node_modules:

node node_modules/cowsay/clis.js

Ou colocaria um script no package.json:

{
  "name": "blog-npx",
  "version": "1.0.0",
  "description": "",
  "main": "index.js",
  "scripts": {
    "fala": "cowsay"
  },
  "dependencies": {
    "cowsay": "^1.4.0"
  }
}
Resultado quando executar npm run fala algo legal:

‚ùØ npm run fala algo legal

> blog-npx@1.0.0 fala /Users/tgmarinho/Developer/blog-rocketseat/blog-npx
> cowsay "algo" "legal"

 ____________
< algo legal >
 ------------
        \\   ^__^
         \\  (oo)\\_______
            (__)\\       )\\/\\
                ||----w |
                ||     ||

Developer/blog-rocketseat/blog-npx

üöÄ Com NPX

O NPX busca a biblioteca na Registry do NPM, instala em uma pasta tempor√°ria, executa o comando e depois remove a biblioteca da m√°quina, ela n√£o fica na node_modules global.

NPX n√£o s√≥ busca no site do npmjs, como busca de dentro da node_modules do projeto tamb√©m ou at√© mesmo na node_modules global antes de ir na Internet buscar a lib e executar.

Verifico se j√° tenho a lib instalada e executo com npx

Nesse outro exemplo eu desinstalo a lib cowsay e utilizo o npx para baixar e executar:

npx cowsay

Exemplo de como iniciar um projeto react native com typescript usando o npx.

npx react-native init MyApp --template react-native-template-typescript

O comando acima executa o react-native com o init MyAppRN --template react-native-template-typescript, para isso ele verifica se o react-native est√° presente na node_modules global, se n√£o estiver ele baixa e executa de uma vez.

Uma vez o projeto criado e com a biblioteca do react-native na node_modules, mesmo que voc√™ executar novamente o npx react-native run-ios por exemplo, ele n√£o vai na Internet buscar o react-native, mas sim vai utilizar o que est√° na node_modules.

üòé Vantagem

Ter o react-native cli ou create-react-app na m√°quina ocupa espa√ßo e essas bibliotecas s√£o atualizadas muito r√°pido, ent√£o n√£o compensa ficar mantendo elas na m√°quina. O comando create-react-app, por exemplo, √© feito uma vez e depois nunca mais, a menos que voc√™ comece outro projeto.

‚ùØ du -sh react-native create-react-app 

306M	react-native
 28M	create-react-app

Olha ai o tanto de espa√ßo que economiza na m√°quina: 334 Mb.

Inclusive a lib do React refor√ßa isso.

üìú Documenta√ß√£o das bibliotecas
Hoje muitas documenta√ß√µes instruem instalar a sua biblioteca de forma global com par√¢metro -g  mas est√£o desatualizadas, se for um script que cria um projeto basta executar com npx. Se voc√™ entendeu o que √© o npx, j√° consegue identificar quando usar lib local ou usar apenas o npx.

Rodando node em outras vers√µes
Temos o nvm Node Version Manager que faz o gerenciamento de vers√µes do node na m√°quina.

Mas com o npx podemos tamb√©m fazer o gerenciamento de vers√£o tamb√©m.

Exemplo:

‚ùØ npx node@6 -v                               
v6.17.1
~/Developer took 12s 
‚ùØ node -v                                                                             
v13.9.0
Perceba que o comando foi executado na vers√£o 6.x do node, mas o node instalado na minha m√°quina est√° na vers√£o 13.x

Sintaxe:

npx node@version <command>
ü¶∏‚Äç‚ôÄÔ∏è Avan√ßado
Podemos ainda executar comandos que est√£o no Gist.

npx https://gist.github.com/tgmarinho/cbf45688de3c7a721785ccb4efbb10ca
O comando acima vai ler o arquivo package.json, instalar as bibliotecas de forma tempor√°ria, executar o script que est√° no "bin" do package.json.

O arquivo index.js est√° importando a lib cowsay e est√° imprimindo um log no console com o cowsaw. Veja o resultado:

‚ùØ npx https://gist.github.com/tgmarinho/cbf45688de3c7a721785ccb4efbb10ca       
npx: installed 11 in 7.452s
 _____________________
< Hello Rocketseat!!! >
 ---------------------
        \\   ^__^
         \\  (OO)\\_______
            (__)\\       )\\/\\
             U  ||----w |
                ||     ||
Eu sou um script que est√° no gist e sendo executado com npx
~/Developer took 7s
Conclus√£o
A dica √©: sempre que for criar um projeto react ou react native utilize o npx:

Criar um projeto com React:

npx create-react-app MyWebApp
Criar um projeto com React Native:

npx react-native init MyApp
Criar um projeto com React Native com Typescript:

npx react-native init MyApp --template react-native-template-typescript
‚ûï Plus:
Mostrando onde o bin√°rio foi instalado com Which:

which create-react-app
/Users/tgmarinho/.nvm/versions/node/v13.9.0/bin/create-react-app
which react-native
react-native not found
Exibindo o tamanho da pasta dom DU:

du -sh /Users/tgmarinho/.nvm/versions/node/v13.9.0/lib/node_modules/
454M
üîó Links
Segue alguns links de refer√™ncia sobre npx.

üîó  npx | awesome-npx | intro-npx-by-creator |dif-npm-e-npx | walde.co

READ MORE POSTS BY THIS AUTHOR
Thiago Marinho
Dev Apaixonado por Tecnologia & Educa√ß√£o! Evolua r√°pido como a tecnologia, aprendizado √© cont√≠nuo e sempre haver√° um pr√≥ximo n√≠vel. Boost Yourself! üöÄ

THE LINK HAS BEEN COPIED!
https://blog.rocketseat.com.br/conhecendo-o-npx-executor-de-pacote-do-npm/
PR√ìXIMO POST
O que √© README e porque √© t√£o importante
POST ANTERIOR
5 dicas para uma carreira s√≥lida como programador(a)

Blog da Rocketseat
HOME
 
BACK END
 
FRONT END
 
MOBILE
¬© 2021 Blog da Rocketseat. Feito com <3. Published with Ghost.
Palavras-chave...
DIGITE NO M√çNIMO 3 CARACTERES
Posso te sugerir um assunto?
REACT NATIVE REACT JAVASCRIPT REACTJS NODEJS EXPRESSJS BACKEND FRONT END REDUX ADONISJS ROCKETSEAT REACTNAVIGATION MAPBOX EXPO GITHUB NEXTJS DOCKER TYPESCRIPT TOP GRAPHQL
Posso te sugerir um autor?
DIEGO FERNANDES THIAGO MARINHO HIGO RIBEIRO CLAUDIO ORLANDI JO√ÉO PAULO DE MAGALH√ÉES TIAGO LUCHTENBERG CARLOS LEVIR
Blog da Rocketseat. Junte-se a milhares de devs e acelere na dire√ß√£o dos seus objetivos. Transforme sua carreira em uma jornada de evolu√ß√£o cont√≠nua atrav√©s das melhores tecnologias..